<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
	<script src="js/jquery-3.3.1.min.js"></script>
	<script src="js/index.js"></script>
	<script src="js/bootstrap-datepicker.min.js"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="js/bootstrap-datepicker.min.js"></script>
    <title>Резервирование места в офисе</title>
</head>
<body style=" margin:0px">
<div style="background-color:white;position: absolute;max-width: 94%; margin: 3% 3%;height: 100%;width: 100%; max-height: 89%;opacity: 0.8;">
<div class="form-group" style="position:absolute; margin-left:5px;">
                    <label for="FromDate">Дата бронирования</label>
                    <input type="datetime" class="form-control date-form" name="FromDate" style="width:100px" placeholder="" id="date" onchange="checkDate()">
</div>
<svg width="90%" height="90%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 400" id="realSVG" >
<g>
  <title>background</title>
  <rect x="-1" y="-1" width="502" height="402" id="canvas_background" fill="#fff"/>
  <g id="canvasGrid" display="none">
   <rect id="svg_7" width="100%" height="100%" x="0" y="0" stroke-width="0" fill="url(#gridpattern)"/>
  </g>
 </g>
 <g>
  <title>Layer 1</title>
  <rect fill="#fff" stroke-width="1.5" x="2.806544" y="3.295261" width="140.122731" height="134.053963" id="svg_1" stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" x="2.814884" y="166.924494" width="181.862611" height="104.324253" id="svg_2" stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="2.805826" y="256.263628" width="289.188992" height="140.795824" id="svg_3" stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="2.803067" y="136.783389" width="302.22391" height="30.81079" id="svg_4" stroke="#000"/>
  <line fill="none" stroke="#ffffff" stroke-width="1.5" fill-opacity="null" x1="342.864789" y1="290.515139" x2="343.405329" y2="290.515139" id="svg_12" stroke-linejoin="null" stroke-linecap="null"/>
  <line fill="none" stroke="#ffffff" stroke-width="1.5" x1="30.811004" y1="117.001744" x2="31.351544" y2="116.461204" id="svg_13" stroke-linejoin="null" stroke-linecap="null"/>
  <g id="svg_20" stroke="null">
   <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="304.764896" y="94.506264" width="188.981198" height="119.643838" id="svg_5" stroke="#000"/>
   <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="368.500051" y="214.773248" width="125.209268" height="127.744725" id="svg_6" stroke="#000"/>
   <rect fill="#ffffff" stroke-width="1.5" x="370.211683" y="209.441875" width="122.000993" height="7.03415" id="svg_19" stroke="#ffffff"/>
  </g>
  <line fill="none" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x1="3.130178" y1="208.311021" x2="97.651444" y2="208.787212" id="svg_21" stroke-linejoin="null" stroke-linecap="null" stroke="#000"/>
  <g id="svg_24" stroke="null">
   <line fill="none" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x1="115.380796" y1="233.035091" x2="96.981337" y2="208.701848" id="svg_22" stroke-linejoin="null" stroke-linecap="null" stroke="#000"/>
   <line fill="none" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x1="115.380797" y1="256.578975" x2="115.380797" y2="232.510506" id="svg_23" stroke-linejoin="null" stroke-linecap="null" stroke="#000"/>
  </g>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="146.702901" y="182.426883" width="22.175745" height="33.054412" id="table_22" class="table_area" onclick="order(this)"/>
  <line fill="none" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x1="184.724362" y1="254.985768" x2="184.724362" y2="305.07411" id="svg_26" stroke-linejoin="null" stroke-linecap="null" stroke="#000"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="20.080887" y="215.017197" width="60.669491" height="34.309643" id="table_21" class="table_area" onclick="order(this)"/>
  <ellipse fill="none" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" cx="28.501995" cy="187.029396" id="svg_31" rx="14.016744" ry="14.22595"/>
  <text fill="#000000" stroke="#000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="111.974846" y="158.159087" id="svg_32" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve">Коридор</text>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="65.869159" y="265.392353" width="42.677849" height="12.970719" id="table_20" class="table_area" onclick="order(this)"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="12.967911" y="265.836012" width="42.677849" height="12.970719" id="table_19" class="table_area" onclick="order(this)"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="13.124214" y="284.32662" width="42.677849" height="12.970719" id="table_18" class="table_area" onclick="order(this)"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="23.271866" y="16.318004" width="42.677849" height="12.970719" id="table_29" class="table_area" onclick="order(this)"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="77.246792" y="16.736415" width="42.677849" height="12.970719" id="table_30" class="table_area" onclick="order(this)"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="77.665202" y="36.401698" width="42.677849" height="12.970719" id="table_28" class="table_area" onclick="order(this)"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="77.080954" y="54.39334" width="42.677849" height="12.970719" id="table_26" class="table_area" onclick="order(this)"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="24.527096" y="36.401698" width="42.677849" height="12.970719" id="table_27" class="table_area" onclick="order(this)"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="24.527096" y="54.39334" width="42.677849" height="12.970719" id="table_25" class="table_area" onclick="order(this)"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="230.605258" y="256.275913" width="63.179953" height="140.795446" id="svg_42" stroke="#000"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="244.813784" y="311.015136" width="42.677849" height="12.970719" id="table_3" class="table_area" onclick="order(this)"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="245.103109" y="326.417073" width="42.677849" height="12.970719" id="table_4" class="table_area" onclick="order(this)"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="310.353205" y="98.542437" width="42.677849" height="12.970719" id="svg_45"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="446.882892" y="99.455679" width="42.677849" height="12.970719" id="svg_46"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="403.503894" y="118.177141" width="42.677849" height="12.970719" id="table_32" class="table_area" onclick="order(this)"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="356.471928" y="117.72052" width="42.677849" height="12.970719" id="table_31" class="table_area" onclick="order(this)"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="314.909041" y="196.544756" width="42.677849" height="12.970719" id="svg_49"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="409.227221" y="324.870848" width="42.677849" height="12.970719" id="svg_50"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="362.184882" y="311.997203" width="42.677849" height="12.970719" id="svg_51" transform="rotate(-90.06632232666016 383.52383422851574,318.4825744628907) "/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="362.195256" y="267.326223" width="42.677849" height="12.970719" id="svg_52" transform="rotate(-90.06632232666016 383.53421020507807,273.8115844726562) "/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="362.117423" y="222.810859" width="42.677849" height="12.970719" id="svg_53" transform="rotate(-90.06632232666016 383.45635986328125,229.2962493896484) "/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="460.981209" y="221.674494" width="42.677849" height="12.970719" id="svg_54" transform="rotate(-90.06632232666016 482.3201293945313,228.15989685058597) "/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="461.359998" y="311.447358" width="42.677849" height="12.970719" id="svg_55" transform="rotate(-90.06632232666016 482.69891357421875,317.93273925781244) "/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="461.359998" y="266.750317" width="42.677849" height="12.970719" id="svg_56" transform="rotate(-90.06632232666016 482.6989135742188,273.2356872558594) "/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="460.602421" y="155.386515" width="42.677849" height="12.970719" id="svg_57" transform="rotate(-90.06632232666016 481.94134521484386,161.8719177246094) "/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="196.355057" y="273.519432" width="40.224101" height="12.970719" id="table_8" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 216.46710205078122,280.0048217773437) " stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="177.44617" y="273.636" width="40.020549" height="12.970719" id="table_7" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 197.45645141601568,280.1213684082031) " stroke="#000"/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="233.289835" y="275.257962" width="42.677849" height="12.970719" id="table_1" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 254.62878417968753,281.74334716796875) "/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="232.622887" y="365.932486" width="42.677849" height="12.970719" id="table_6" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 253.96182250976565,372.4178466796875) "/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="257.780936" y="366.371693" width="42.677849" height="12.970719" id="table_5" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 279.119873046875,372.8570556640625) "/>
  <rect fill="#fff" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="255.152662" y="274.993045" width="42.677849" height="12.970719" id="table_2" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 276.49160766601557,281.47842407226557) "/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="182.199626" y="371.158036" width="33.983679" height="12.970719" id="table_11" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 199.19146728515625,377.6434020996094) " stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="200.74316" y="370.727378" width="33.764831" height="12.970719" id="table_12" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 217.62557983398443,377.2127380371094) " stroke="#000"/>
  <line fill="none" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x1="233.612049" y1="301.875125" x2="233.612049" y2="308.396637" id="svg_81" stroke-linejoin="null" stroke-linecap="null" transform="rotate(90.38529968261719 233.612060546875,305.13586425781256) " stroke="#000"/>
  <line fill="none" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x1="234.144049" y1="317.416376" x2="234.144049" y2="323.282882" id="svg_82" stroke-linejoin="null" stroke-linecap="null" transform="rotate(90.38529968261719 234.14404296874991,320.3496398925781) " stroke="#000"/>
  <line fill="none" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x1="115.292188" y1="256.950826" x2="115.292188" y2="305.72913" id="svg_83" stroke-linejoin="null" stroke-linecap="null" stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="182.199626" y="334.913568" width="33.983679" height="12.970719" id="table_9" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 199.19146728515625,341.39892578125) " stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="200.976882" y="334.913568" width="33.983679" height="12.970719" id="table_10" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 217.96871948242188,341.39892578125) " stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="81.763141" y="332.948506" width="33.983679" height="12.970719" id="table_14" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 98.75498962402347,339.4338684082031) " stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="81.981481" y="369.847996" width="33.983679" height="12.970719" id="table_16" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 98.97332763671878,376.3333740234375) " stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="60.584144" y="332.948506" width="33.983679" height="12.970719" id="table_13" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 77.57598876953124,339.43389892578125) " stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="60.584144" y="369.411317" width="33.983679" height="12.970719" id="table_15" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 77.57598876953129,375.89669799804693) " stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="4.467692" y="364.826218" width="39.223839" height="12.970719" id="table_17" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 24.07959747314459,371.3115844726563) " stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="11.288886" y="96.998359" width="40.020549" height="12.970719" id="table_23" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 31.29917907714844,103.48373413085938) " stroke="#000"/>
  <rect fill="#fff" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" x="32.467935" y="96.998359" width="40.020549" height="12.970719" id="table_24" class="table_area" onclick="order(this)" transform="rotate(-90.06632232666016 52.47822570800783,103.48373413085938) " stroke="#000"/>
  <text fill="#000000" stroke="#000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="247.699592" y="287.553799" id="svg_93" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve">1</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="251.878798" y="286.555695" id="svg_94" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.8240097761154175,0,0,0.9374692440032958,63.183866798161034,18.24032151848951) " stroke="#000">2</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="346.307742" y="316.106479" id="svg_95" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.6983869671821592,0,0,0.49111801385879517,21.108649402936848,165.78958714831603) " stroke="#000">3</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="237.982115" y="336.514709" id="svg_96" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.7758843804788071,0,0,0.5369912462033888,77.46569546528812,156.4805554855553) " stroke="#000">4</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="258.927215" y="381.576988" id="svg_97" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.8492122888565063,0,0,0.9749748706817627,53.483947417367744,9.641532870446099) " stroke="#000">5</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="231.253318" y="374.160006" id="svg_98" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.7989216446876525,0,0,0.9874487519264221,63.447121738277914,12.143059306907162) " stroke="#000">6</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="177.217812" y="279.193833" id="svg_99" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.7988530397415161,0,0,0.9123569130897521,50.253740813379416,31.958932280480436) " stroke="#000">7</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="183.199704" y="285.916542" id="svg_100" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.7486885190010071,0,0,0.8872263431549072,74.12825113031067,32.14739256651228) " stroke="#000">8</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="156.631257" y="349.105843" id="svg_101" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.6983818411827087,0,0,0.898638904094696,85.1208546277685,35.76781218405995) " stroke="#000">9</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="118.822641" y="340.938624" id="svg_102" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.4594044685363769,0,0,0.8365168571472168,156.7001132761797,63.92809946334455) " stroke="#000">10</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="60.284441" y="383.12829" id="svg_103" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.3939082622528076,0,0,0.8266794681549072,169.42048977647937,66.39283953876293) " stroke="#000">11</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="177.26128" y="349.663431" id="svg_104" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.4193162582277488,0,0,0.9603375521495394,137.159176511663,49.10371141863392) " stroke="#000">12</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="-40.386594" y="348.468224" id="svg_105" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.4441303488139283,0,0,1.025034427642822,88.82688214642229,-8.659105828774045) " stroke="#000">13</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="-60.553247" y="347.985584" id="svg_106" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.4217357635498047,0,0,1,118.3691874225915,0) " stroke="#000">14</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="-24.085391" y="376.173423" id="svg_107" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.44691297411918635,0,0,1,81.7837751574666,8.053668022155762) " stroke="#000">15</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="-68.861855" y="384.562663" id="svg_108" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.4344352185726166,0,0,1,122.41216303747251,0) " stroke="#000">16</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="-265.261382" y="378.18684" id="svg_109" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.42173701524734497,0,0,1,130.20582520605058,0) " stroke="#000">17</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="-28.075705" y="295.015204" id="svg_110" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.5927419222701928,0,0,0.5467329139517574,42.59489445870215,134.7719415672172) " stroke="#000">18</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="110.363757" y="276.636332" id="svg_111" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.4442491350966291,0,0,0.5719529311676933,-20.758598499368546,118.90673511830192) " stroke="#000">19</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="-111.734165" y="248.889844" id="svg_112" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.40919414162635803,0,0,0.5312062680036256,127.47888575406932,143.94030164475237) " stroke="#000">20</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="196.308167" y="191.610189" id="svg_113" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.6014746987847275,0,0,0.8381020588604359,32.089693002194835,44.77473188134835) " stroke="#000">22</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="39.439046" y="228.858405" id="svg_114" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.9874303936958312,0,0,0.9624999761581421,-1.4805642432556851,18.84042801751275) " stroke="#000">21</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="-135.306484" y="110.066796" id="svg_115" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.3463858962059021,0,0,1,73.257209577082,0) " stroke="#000">23</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="-84.399034" y="105.364453" id="svg_116" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="rotate(0.2976049780845642 52.488780975336844,101.74122619628906) matrix(0.3577441398194529,0,0,1.000832366987098,77.90706216769308,4.27923385082501) " stroke="#000">24</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="-73.484272" y="66.975672" id="svg_117" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.409178227186203,0,0,0.6021840572357178,68.20204630820058,25.857353383353257) " stroke="#000">25</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="33.358044" y="63.422633" id="svg_118" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.5851650834083557,0,0,0.5336694121360779,71.96947775273657,32.070801756794026) " stroke="#000">26</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="-54.702437" y="48.517123" id="svg_119" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.4847167730331421,0,0,0.5560329556465149,63.9779368893378,20.561887632769867) " stroke="#000">27</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="14.988446" y="45.283385" id="svg_120" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.5097917914390564,0,0,0.5141686201095581,86.19744663982783,24.175815605830394) " stroke="#000">28</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="-40.04425" y="23.677469" id="svg_121" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.5171444361711008,0,0,0.5909462249887748,57.569869298083184,13.45685983697078) " stroke="#000">29</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="22.535092" y="25.167708" id="svg_122" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.5432105868554159,0,0,0.5995657648512634,80.8152759201968,12.95022995253996) " stroke="#000">30</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="308.172905" y="125.167424" id="svg_123" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.5850958824157715,0,0,0.5957961678504943,188.35917085407706,54.66282877663797) " stroke="#000">31</text>
  <text fill="#000000" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="359.709262" y="126.509702" id="svg_124" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.5851433277130127,0,0,0.5299561023712158,206.1748278694722,61.77508316998137) " stroke="#000">32</text>
 </g>
</svg>

<!-- <object type="image/svg+xml" data="img/office.svg" id="map_office" width="90%" height="90%"  style="margin-top:1%"></object> -->
</div>
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Бронирование места</h5>
        <button type="button" class="close" style="max-width: 69px;"data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
		<div id="placenum"style="display:inline-block"></div>
      </div>
      <div class="modal-footer">
        <button type="button"style="display:inline-block;width: 47%;" class="btn btn-secondary" data-dismiss="modal">Закрыть</button>
        <button type="button" onclick="save()"style="display:inline-block;width: 47%;" class="btn btn-primary">Забронировать</button>
      </div>
    </div>
  </div>
</div>

<script>
let obj;
document.addEventListener("DOMContentLoaded", checkJson(formatDate(new  Date())));
 $(".date-form").datepicker({
            format: 'dd.mm.yyyy'
        });
//request.send(null);
function order(element){
  $('#exampleModal').modal('show');
  placeId=element.id.split('_')[1];
  var text="";
  if(element.style.fill=="red")
  {
  
	text='К сожалению, место '+placeId+' занято. Выберите другое место или другую дату';
	user= obj.booking.find(item => item.date==document.getElementById('date').value).blocked.find(bookPlace=>bookPlace.place==placeId);
	var data = fetch('/getUserInfo?'+user.login)
  .then(response => response.json())
  console.log(data));
	
  }
  else
  {
    text='Забронировать место <span id="'+placeId+'">'+placeId+' на '+document.getElementById('date').value +'</span>'
  }
  $(document.getElementById('placenum')).html(text)
}
function save()
{
console.log(obj);
$('#exampleModal').modal('hide')
try
{
	obj.booking.find(item => item.date==document.getElementById('date').value).blocked.push(parseInt(placeId));
}
catch(e)
{
   var newBook= {"blocked":[parseInt(placeId)], "date":document.getElementById('date').value}
   obj.booking.push(newBook)
}

 console.log(obj);
 var xhr = new XMLHttpRequest();
 var body = JSON.stringify(obj);
 xhr.open("POST", '/saveJson', true);
 xhr.setRequestHeader('Content-Type', 'application/json');
 xhr.onreadystatechange = function() { // Call a function when the state changes.
    if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
        console.log('all good');
    }
}
 xhr.send(body);
 checkJson(document.getElementById('date').value)
}
function formatDate(date) {

  var dd = date.getDate();
  if (dd < 10) dd = '0' + dd;

  var mm = date.getMonth() + 1;
  if (mm < 10) mm = '0' + mm;

  var yy = date.getFullYear();
  if (yy < 10) yy = '0' + yy;

  return dd + '.' + mm + '.' + yy;
}
function checkJson(date)
{
	var allTable= document.getElementsByClassName('table_area');
	for (var table=0; allTable.length>table; table++)
	{
		allTable[table].style.fill="white";
	}
	

	
	
	var request = new XMLHttpRequest;
request.open('GET', 'https://bookingplacegetcrm.herokuapp.com/test.txt', true);
request.onload = function () {
 try {
	    obj = JSON.parse(request.responseText);
	   console.log(obj);
	   var blocked= obj.blocked;
	   for (const property in blocked) 
	   {
			var element = document.getElementById("table_"+blocked[property]);
			// $(element)[0].style.backgroundColor = '#ec9191';
			element.style.fill="red";
			
	   }
	   for (const property in obj.booking)
	   {
	    if(date==obj.booking[property].date)
		{
			var blocked= obj.booking[property].blocked;
			for (const item in blocked)  
			{
			
					var element = document.getElementById("table_"+blocked[item].place); 
					// $(element)[0].style.backgroundColor = '#ec9191'; 
					 element.style.fill="red";
					
			} 
		}
	    
	   }
	   return obj;
    } catch (e) {
        console.log(e);
		
    }

};
request.send(null);
}
function checkDate()
{
	obj = checkJson(document.getElementById('date').value)
}
</script>
</body>
</html>
